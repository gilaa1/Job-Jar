"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{759:(e,t,a)=>{a.d(t,{Ay:()=>h,Rs:()=>u,Ti:()=>d});var n=a(4848),l=a(6540),r=a(4976),s=a(7767),o=a(1021),i=a(1352),c=a(5885);let u=(0,l.createContext)(null),d=(0,l.createContext)(null),h=function(e){let{firstCache:t,totalPages:a}=e,[h,m]=(0,l.useState)({firstName:"",lastName:"",email:"",token:""}),[p,x]=(0,l.useState)([]),j=()=>{m({firstName:"",lastName:"",email:"",token:""})};return(0,n.jsx)("div",{className:"App",children:(0,n.jsx)(u.Provider,{value:h,children:(0,n.jsx)(d.Provider,{value:p,children:(0,n.jsx)(r.Kd,{children:(0,n.jsxs)(s.BV,{children:[(0,n.jsx)(s.qh,{path:"/",element:(0,n.jsx)(o.default,{onLogin:e=>{m({firstName:e.user.firstName,lastName:e.user.lastName,email:e.user.email,token:e.Authorization})},onSignup:e=>{m({firstName:e.user.firstName,lastName:e.user.lastName,email:e.user.email,token:e.Authorization})},onLogout:j})}),(0,n.jsx)(s.qh,{path:"/main",element:(0,n.jsx)(i.default,{onLogout:j,onAddJob:e=>{x([...p,e]),console.log(p)}})}),(0,n.jsx)(s.qh,{path:"/joblist",element:(0,n.jsx)(c.default,{firstCache:t,pages:a})})]})})})})})}},1021:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(4848),l=a(6540),r=a(7528),s=a(5456),o=a(4335);let i=e=>{let{onSignup:t}=e,[a,i]=(0,l.useState)({firstName:"",lastName:"",email:"",password:""}),c=e=>{i((0,s._)((0,r._)({},a),{[e.target.name]:e.target.value}))},u=async e=>{e.preventDefault();try{console.log(a),await o.A.post("http://localhost:3001/api/signup",a).then(e=>{t(e.data),i({firstName:"",lastName:"",email:"",password:""})})}catch(e){alert(e.response.data.error),console.error("Error signing up:",e)}};return(0,n.jsxs)("div",{className:"signup",children:[(0,n.jsx)("h1",{children:"Sign Up"}),(0,n.jsxs)("form",{onSubmit:u,children:[(0,n.jsx)("label",{htmlFor:"firstName",children:"First Name:"}),(0,n.jsx)("input",{type:"text",name:"firstName",value:a.firstName,onChange:c,required:!0}),(0,n.jsx)("label",{htmlFor:"lastName",children:"Last Name:"}),(0,n.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:c,required:!0}),(0,n.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,n.jsx)("input",{type:"email",name:"email",value:a.email,onChange:c,required:!0}),(0,n.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,n.jsx)("input",{type:"password",name:"password",value:a.password,onChange:c,required:!0}),(0,n.jsx)("button",{type:"submit",children:"Signup"})]})]})};var c=a(7767);let u=e=>{let{onLogin:t}=e,[a,i]=(0,l.useState)({email:"",password:""}),u=(0,c.Zp)(),d=e=>{i((0,s._)((0,r._)({},a),{[e.target.name]:e.target.value}))},h=async e=>{e.preventDefault();try{console.log(a),await o.A.post("http://localhost:3001/api/login",a).then(e=>{console.log(e.data),t(e.data),u("/main"),i({email:"",password:""})})}catch(e){alert(e.response.data.error),console.error("Error logging in:",e)}};return(0,n.jsxs)("div",{className:"login",children:[(0,n.jsx)("h1",{children:"Login"}),(0,n.jsxs)("form",{onSubmit:h,children:[(0,n.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,n.jsx)("input",{type:"email",name:"email",value:a.email,onChange:d,required:!0}),(0,n.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,n.jsx)("input",{type:"password",name:"password",value:a.password,onChange:d,required:!0}),(0,n.jsx)("button",{type:"submit",children:"Login"})]})]})};var d=a(759);let h=e=>{let{onLogin:t,onSignup:a}=e,r=(0,l.useContext)(d.Rs);return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Welcome to Job-Jar!"}),!(null==r?void 0:r.email)&&(0,n.jsx)(i,{onSignup:a}),!(null==r?void 0:r.email)&&(0,n.jsx)(u,{onLogin:t})]})}},5885:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(7528),l=a(4848),r=a(6540);let s=e=>{let{job:t}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:t.title}),(0,l.jsx)("p",{children:t.description}),(0,l.jsx)("p",{children:t.pay})]})};var o=a(759),i=a(4335);let c=e=>{let{activePage:t,onPageChange:a,totalPages:n,paginationRange:r}=e;return(0,l.jsxs)("div",{className:"pagination",children:[(0,l.jsx)("button",{name:"first",onClick:()=>a(1),children:"First"}),(0,l.jsx)("button",{name:"previous",onClick:()=>a(t-1),children:"Previous"}),r.map(e=>(0,l.jsx)("button",{name:"page-"+e,style:{fontWeight:e===t?"bold":"normal"},onClick:()=>a(e),children:e},e)),(0,l.jsx)("button",{name:"next",onClick:()=>a(t+1),children:"Next"}),(0,l.jsx)("button",{name:"last",onClick:()=>a(n),children:"Last"})]})},u=e=>{let{pages:t,firstCache:a}=e,u=(0,r.useContext)(o.Ti),[d,h]=(0,r.useState)(u),[m,p]=(0,r.useState)(1),[x,j]=(0,r.useState)(t),g=(0,r.useRef)(a);(0,r.useEffect)(()=>{let e=async e=>{try{let e=b(m,x),t=(0,n._)({},g.current);for(let a=0;a<e.length;a++){let n=e[a];g.current[n]||await i.A.get("http://localhost:3001/jobs?page=".concat(n)).then(e=>{t[n]=e.data.jobs})}g.current=t}catch(e){console.error("Error fetching jobs:",e)}};0!==x&&(g.current[m]?(h(g.current[m].jobs),e(m)):i.A.get("http://localhost:3001/jobs?page=".concat(m)).then(t=>{j(Math.ceil(t.data.totalJobs/10)),h(t.data.jobs),e(m)}))},[m,x]);let b=(e,t)=>{let a=Math.max(1,e-2),n=Math.min(t,e+2);return e<3?n=Math.min(t,5):e>t-2&&(a=Math.max(1,t-5+1)),Array.from({length:n-a+1},(e,t)=>a+t)},v=b(m,x);return(0,l.jsxs)("div",{children:[null==d?void 0:d.map(e=>(0,l.jsx)(s,{job:e},e.id)),(0,l.jsx)(c,{activePage:m,totalPages:x,onPageChange:function(e){e<1||e>x||p(e)},paginationRange:v})]})}},1352:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(4848),l=a(6540),r=a(4335),s=a(759),o=a(7767);let i=e=>{let{onLogout:t}=e,a=(0,l.useContext)(s.Rs),i=(0,o.Zp)(),c=async e=>{e.preventDefault();try{await r.A.post("http://localhost:3001/api/logout",{},{headers:{Authorization:"Bearer ".concat(a.token)}}).then(()=>{t(),i("/")})}catch(e){alert(e.response.data.error),console.error("Error logging out:",e)}};return(0,n.jsx)("div",{className:"logout",children:(0,n.jsx)("button",{onClick:c,children:"Logout"})})};var c=a(4976);let u=()=>(0,n.jsx)("nav",{children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:(0,n.jsx)(c.N_,{to:"/main",children:"Main"})}),(0,n.jsx)("li",{children:(0,n.jsx)(c.N_,{to:"/joblist",children:"Job List"})})]})});var d=a(7528),h=a(5456);let m=e=>{let{onAddJob:t}=e,a=(0,l.useContext)(s.Rs),[o,i]=(0,l.useState)({title:"",time:"",description:"",payment:"",location:""}),[c,u]=(0,l.useState)(!1),m=async e=>{i((0,h._)((0,d._)({},o),{[e.target.name]:e.target.value}))},p=async e=>{e.preventDefault();try{await r.A.post("http://localhost:3001/api/postjob",o,{headers:{Authorization:"Bearer ".concat(a.token)}}).then(e=>{let a=e.data;console.log("NEW JOB: ",a),t(a),console.log("NEW JOB: ",a),i({title:"",time:"",description:"",payment:"",location:""}),console.log("DATA: ",o),u(!1),console.log("IS POSTING: ",c)})}catch(e){alert(e.response.data.error),console.error("Error posting job:",e),u(!1)}};return(0,n.jsxs)(n.Fragment,{children:[!c&&(0,n.jsx)("button",{onClick:()=>u(!0),children:"Post a Job"}),c&&(0,n.jsxs)("div",{className:"post-job",children:[(0,n.jsx)("h1",{children:"Post a Job"}),(0,n.jsxs)("form",{onSubmit:p,children:[(0,n.jsx)("label",{htmlFor:"title",children:"Title:"}),(0,n.jsx)("input",{type:"text",name:"title",value:o.title,onChange:m,required:!0}),(0,n.jsx)("label",{htmlFor:"time",children:"Time:"}),(0,n.jsx)("input",{type:"text",name:"time",value:o.time,onChange:m,required:!0}),(0,n.jsx)("label",{htmlFor:"description",children:"Description:"}),(0,n.jsx)("input",{type:"text",name:"description",value:o.description,onChange:m,required:!0}),(0,n.jsx)("label",{htmlFor:"payment",children:"Payment:"}),(0,n.jsx)("input",{type:"text",name:"payment",value:o.payment,onChange:m,required:!0}),(0,n.jsx)("label",{htmlFor:"location",children:"Location:"}),(0,n.jsx)("input",{type:"text",name:"location",value:o.location,onChange:m,required:!0}),(0,n.jsx)("button",{type:"submit",children:"Post"}),(0,n.jsx)("button",{onClick:e=>{e.preventDefault(),i({title:"",time:"",description:"",payment:"",location:""}),u(!1)},children:"Cancel"})]})]})]})},p=e=>{let{onLogout:t,onAddJob:a}=e,r=(0,l.useContext)(s.Rs);return(0,n.jsxs)("div",{children:[(0,n.jsx)(u,{}),(0,n.jsxs)("h1",{children:["Hi ",null==r?void 0:r.firstName]}),(0,n.jsx)("h1",{children:"Welcome to Job-Jar!"}),(0,n.jsx)(m,{onAddJob:a}),(0,n.jsx)(i,{onLogout:t})]})}}}]);